<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>華南產物保險-FADM0400-繳費簽收</title>
    <!-- favicon -->
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- jQuery-ui -->
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link rel="stylesheet" href="css/jquery-ui.theme.css">
    <!-- Bootstrap_4.5.2 -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- material_icon -->
    <link rel="stylesheet" href="css/material-icons.css">
    <link rel="stylesheet" href="css/material-icons-ie.css">
    <!-- tabulator_4.9 -->
    <link rel="stylesheet" href="css/tabulator.min.css">
    <!-- 全域 -->
    <link rel="stylesheet" href="css/global.css">
    <!-- 框架 -->
    <link rel="stylesheet" href="css/layout.css">
    <!-- 頁面 -->
    <link rel="stylesheet" href="css/page.css">
    <!-- pg使用 -->
    <link rel="stylesheet" href="css/pg.css">
</head>

<body id="canvas" class="fadm0400-tab3-add">
    <div class="frame">
        <!-- frame: menu -->
        <nav class="frame-block leftBlock" id="left_menu">
            <div class="leftBlock-inner mCustomScrollbar">
                <!-- menu-logo -->
                <div class="frame-logo">
                    <a href="#"><img src="img/logo-w.svg" alt=""></a>
                </div>
                <div class="frame-menu">
                    <!-- menu-filter -->
                    <div class="menu-filter">
                        <input type="text" id="menu_filter" placeholder="搜尋目錄">
                    </div>
                    <div class="menu-pgName"><span>繳費簽收</span></div>
                    <!-- menu-list -->
                    <div class="menu-list" include-html="include/menu/payment-signup.html"></div>
                </div>
            </div>
        </nav>
        <!-- frame: content -->
        <div class="frame-block rightBlock" id="right_content">
            <!-- header -->
            <header class="frame-content headerModule">
                <div class="header-list" include-html-header="include/header/header.html"></div>
            </header>
            <!-- main -->
            <main class="frame-content mainModule">
                <div class="content">
                    <!-- breadcrumb -->
                    <div class="content-component content-breadcrumb">
                        <ul>
                            <li><a href="#">財務</a></li>
                            <li><a href="#">繳費簽收</a></li>
                        </ul>
                    </div>
                    <!-- card -->
                    <div class="content-component content-card">
                        <!-- unitname -->
                        <div class="content-component content-unitname">
                            <div class="unitname-inner">
                                <div class="unitname-item unitname-title">繳費簽收</div>
                                <div class="unitname-item unitname-favourite">
                                    <a href="#" data-toggle="tooltip" title="加入我的最愛" data-placement="left"><span class="material-icons">star_outline</span></a>
                                </div>
                            </div>
                        </div>
                        <!-- unittab -->
                        <div class="card-detail">
                            <!-- card-detail >> board -->
                            <div class="detail-board detail-board-unittab">
                                <!-- unitTab -->
                                <div class="content-component content-unittab">
                                    <ul>
                                        <li><a href="#">維護作業</a></li>
                                        <li><a href="#">列印作業</a></li>
                                        <li><a href="fadm0400-tab3-01-query.html" class="unittab-active">臨櫃繳費</a></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- query -->
                        <div class="card-detail">
                            <!-- card-detail >> board -->
                            <div class="detail-board detail-board-query">
                                <!-- query -->
                                <div class="content-component content-query">
                                    <!-- 簽收日/要保號碼 -->
                                    <div class="query-row">
                                        <div class="query-field query-datepicker">
                                            <div class="query-field-inner">
                                                <div class="query-field-item query-field-title">簽收日</div>
                                                <div class="query-field-item query-field-entry"><input type="date" id="" name="簽收日" title="" data-toggle="tooltip" data-placement="top"></div>
                                            </div>
                                        </div>
                                        <div class="query-field query-input">
                                            <div class="query-field-inner">
                                                <div class="query-field-item query-field-title">要保號碼</div>
                                                <div class="query-field-item query-field-entry"><input type="text" placeholder="請輸入值" name="要保號碼" title="" data-toggle="tooltip" data-placement="top"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- button -->
                        <div class="card-detail">
                            <!-- card-detail >> board -->
                            <div class="detail-board detail-board-btn">
                                <!-- btn -->
                                <div class="content-component content-btn">
                                    <div class="content-btn-main">
                                        <ul>
                                            <li><button class="content-btn-item btn-main btn-clear"><span>清除</span></button></li>
                                            <li><button class="content-btn-item btn-main btn-query"><span>查詢</span></button></li>
                                            <li><button class="content-btn-item btn-main btn-add"><span>新增</span></button></li>
                                            <li><button class="content-btn-item btn-main btn-modify"><span>修改</span></button></li>
                                            <li><button class="content-btn-item btn-main btn-delete"><span>刪除</span></button></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="seperate-line">
                        <!-- label -->
                        <div class="card-detail">
                            <!-- card-detail >> board -->
                            <div class="detail-board detail-board-label">
                                <!-- label -->
                                <div class="content-component content-label">
                                    <div class="label-inner">
                                        <div class="label-item">
                                            <div class="label-title">應收保費合計</div>
                                            <div class="label-content label-content-counter">3,000</div>
                                        </div>
                                        <div class="label-item">
                                            <div class="label-title">現金合計</div>
                                            <div class="label-content label-content-counter">1,000</div>
                                        </div>
                                        <div class="label-item">
                                            <div class="label-title">支票合計</div>
                                            <div class="label-content label-content-counter">2,000</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 巢狀結構tabulator -->
                        <!-- tabulator創立table -->
                        <div class="card-detail">
                            <!-- card-detail >> board -->
                            <div class="detail-board">
                                <div class="content-component content-table">
                                    <div class="table-func">
                                        <div class="table-func-inner">
                                            <div class="table-func-basic">
                                                <div class="func-basic-item func-download">
                                                    <ul>
                                                        <li><a href="#" class="table-excel" title="下載excel" data-toggle="tooltip" data-placement="top">EXCEL</a></li>
                                                    </ul>
                                                </div>
                                                <div class="func-basic-item func-count">
                                                    <ul>
                                                        <li class="count-total">2</li>
                                                    </ul>
                                                </div>
                                                <div class="func-basic-item func-filter">
                                                    <div class="func-filter-inner">
                                                        <input type="text" placeholder="請輸入值" title="" data-toggle="tooltip" data-placement="top">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="table-func-page">頁碼</div>
                                        </div>
                                    </div>
                                    <div id="table01"></div>
                                    <div class="table-footer"></div>
                                </div>
                            </div>
                        </div>
                        <!-- copyright -->
                        <div class="content-component content-copyright">[ V-1.0.1 ] ©2021 華南產物保險</div>
                    </div>
                </div>
                <div class="aside">
                    <div class="aside-list" include-html-aside="include/aside/aside.html"></div>
                </div>
            </main>
        </div>
    </div>
    <!-- popup-add -->
    <div class="content-component content-popup">
        <div class="popup-dialog popup-dialog-add">
            <form action="">
                <div class="dialog-header">
                    <div class="dialog-header-inner">
                        <div class="dialog-header-item dialog-title">新增</div>
                        <div class="dialog-header-item dialog-cancel">
                            <a href="fadm0400-tab3-01-query.html"><span class="material-icons">cancel</span></a>
                        </div>
                    </div>
                </div>
                <div class="dialog-content">
                    <!-- customize-form -->
                    <div class="customize-form">
                        <!-- 簽收人/簽收日 -->
                        <div class="customize-form-row">
                            <div class="customize-form-inner">
                                <div class="customize-form-field customize-form-field-1">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">簽收人</div>
                                        <div class="customize-form-entry">
                                                <div class="customize-form-entry-container">
                                                    <div class="customize-form-entry-col customize-form-entry-4">
                                                        <input type="text" name="簽收人" value="" title="" data-toggle="tooltip" data-placement="left" placeholder="請輸入值">
                                                    </div>
                                                    <div class="customize-form-entry-col customize-form-entry-6">
                                                        <input type="text" name="簽收人" value="" title="" data-toggle="tooltip" data-placement="left" placeholder="" attr="readonly" disabled="">
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                </div>
                                <div class="customize-form-field customize-form-field-1">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">簽收日</div>
                                        <div class="customize-form-entry">
                                            <input type="date" name="聯絡電話" value="2022-04-20" placeholder="請輸入值" data-toggle="tooltip" data-placement="left">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- tabulator創立table(可編輯table) -->
                    <div class="customize-form">
                        <div class="customize-form-row">
                            <div class="customize-form-header">
                                <span>保單資料維護</span><a class="add-sub-form"><button type="button">新增</button></a>
                            </div>
                        </div>
                        <!-- tabulator創立table -->
                        <div class="card-detail card-detail-editable">
                            <!-- card-detail >> board -->
                            <div class="detail-board">
                                <div class="content-component content-table">
                                    <div id="table02"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="seperate-line">
                    <!-- label -->
                    <div class="card-detail">
                        <!-- card-detail >> board -->
                        <div class="detail-board detail-board-label">
                            <!-- label -->
                            <div class="content-component content-label">
                                <div class="label-inner">
                                    <div class="label-item">
                                        <div class="label-title">應收保費合計</div>
                                        <div class="label-content label-content-counter">3,000</div>
                                    </div>
                                    <div class="label-item">
                                        <div class="label-title">現金合計</div>
                                        <div class="label-content label-content-counter">1,000</div>
                                    </div>
                                    <div class="label-item">
                                        <div class="label-title">票據金額</div>
                                        <div class="label-content label-content-counter">2,000</div>
                                    </div>
                                    <div class="label-item">
                                        <div class="label-title">票據張數</div>
                                        <div class="label-content label-content-counter">2</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- customize-form -->
                    <div class="customize-form">
                        <div class="customize-form-row">
                            <div class="customize-form-header">
                                <span>現金維護</span>
                            </div>
                        </div>
                        <!-- 現金金額/聯絡電話/繳款人 -->
                        <div class="customize-form-row">
                            <div class="customize-form-inner">
                                <div class="customize-form-field customize-form-field-1">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">現金金額</div>
                                        <div class="customize-form-entry">
                                            <input type="text" name="現金金額" value="1,019" placeholder="請輸入值" data-toggle="tooltip" data-placement="left" attr="money">
                                        </div>
                                    </div>
                                </div>
                                <div class="customize-form-field customize-form-field-1">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">聯絡電話</div>
                                        <div class="customize-form-entry">
                                            <input type="text" name="聯絡電話" value="0227588400" placeholder="請輸入值" data-toggle="tooltip" data-placement="left">
                                        </div>
                                    </div>
                                </div>
                                <div class="customize-form-field customize-form-field-1">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">繳款人</div>
                                        <div class="customize-form-entry">
                                            <input type="text" name="繳款人" value="236820" placeholder="請輸入值" data-toggle="tooltip" data-placement="left">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- EMAIL/備註 -->
                        <div class="customize-form-row">
                            <div class="customize-form-inner">
                                <div class="customize-form-field customize-form-field-2">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">EMAIL</div>
                                        <div class="customize-form-entry">
                                            <input type="text" name="EMAIL" value="" placeholder="請輸入值" data-toggle="tooltip" data-placement="left">
                                        </div>
                                    </div>
                                </div>
                                <div class="customize-form-field customize-form-field-2">
                                    <div class="customize-field-inner">
                                        <div class="customize-form-title">備註</div>
                                        <div class="customize-form-entry">
                                            <input type="text" name="備註" value="" placeholder="請輸入值" data-toggle="tooltip" data-placement="left">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="customize-form-row">
                            <div class="customize-form-header">
                                <span>支票維護</span><a class="add-sub-form"><button type="button">新增</button></a>
                            </div>
                        </div>
                        <!-- tabulator創立table -->
                        <div class="card-detail card-detail-editable">
                            <!-- card-detail >> board -->
                            <div class="detail-board">
                                <div class="content-component content-table form-content-table">
                                    <div id="table03"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dialog-btn">
                    <ul>
                        <li><button class="btn-prime" type="button" onclick="location.href='fadm0400-tab3-01-query.html'">確定</button></li>
                        <li><button class="btn-outline" type="button" onclick="location.href='fadm0400-tab3-01-query.html'">取消</button></li>
                    </ul>
                </div>
            </form>
        </div>
    </div>
</body>
<!-- jQuery_3.5.1  -->
<script src="js/jquery-3.5.1.min.js"></script>
<!-- jQuery-ui_1.12.1 -->
<script src="js/jquery-ui.js"></script>
<!-- Popper -->
<script src="js/popper.min.js"></script>
<!-- Bootstrap_4.5.2 -->
<script src="js/bootstrap.min.js"></script>
<!-- tabulator_4.9 -->
<script src="js/tabulator.min.js"></script>
<!-- tabulator_json -->
<!-- <script src="json/table01.js"></script> -->
<!-- 自定義js -->
<script src="js/layout.js"></script>
<!-- pg使用 -->
<script src="js/pg.js"></script>
<script>
let tableData = [{
        id: "a1",
        要保號碼: "要保號碼",
        原保單號碼: "原保單號碼",
        被保險人: "被保險人",
        要保人: "要保人",
        保費: "保費",
        經手人: "經手人",
    },
    {
        id: "a2",
        要保號碼: "要保號碼",
        原保單號碼: "原保單號碼",
        被保險人: "被保險人",
        要保人: "要保人",
        保費: "保費",
        經手人: "經手人",
    },
]

var table = new Tabulator("#table01", {
    height: "100%",
    layout: "fitColumns",
    pagination: "local",
    paginationSize: 5,
    paginationSizeSelector: [5, 10, 30, 50, true],
    movableColumns: true,
    data: tableData,
    columns: [{
            formatter: "rowSelection",
            titleFormatter: "rowSelection",
            headerHozAlign: "center",
            hozAlign: "center",
            headerSort: false,
            maxWidth: 30,
            minWidth: 30,
            cellClick: function(e, cell) {
                cell.getRow().toggleSelect();
            }
        },
        { title: "要保號碼", field: "要保號碼" },
        { title: "原保單號碼", field: "原保單號碼" },
        { title: "被保險人", field: "被保險人" },
        { title: "要保人", field: "要保人" },
        { title: "保費", field: "保費", hozAlign: "right" },
        { title: "經手人", field: "經手人" },
    ],
});

// 選擇預設勾選row
// table.selectRow("a1");
// 使用filter能精準指定欄位
//table.selectRow(table.setFilter("id","=","a1"));
//////////////////////////////////////////////////////////////////////
let table02Data = [{
        id: "a1",
        要保號碼: "要保號碼",
        原保單號碼: "原保單號碼",
        被保險人: "被保險人",
        要保人: "要保人",
        保費: "保費",
        經手人: "經手人",
    },
    {
        id: "a2",
        要保號碼: "要保號碼",
        原保單號碼: "原保單號碼",
        被保險人: "被保險人",
        要保人: "要保人",
        保費: "保費",
        經手人: "經手人",
    },
];
let table02 = new Tabulator("#table02", {
    data: table02Data,
    height: "100%",
    layout: "fitColumns",
    tooltips: true,
    tooltipsHeader: true,
    tooltipGenerationMode: "hover",
    headerSort: false,
    movableColumns: false,
    resizableRows: false,
    columns: [{
            title: "",
            field: "del",
            minWidth: 50,
            width: 50,
            formatter: (cell) => {
                let row = cell.getRow()
                let table = cell.getTable()
                let btn = document.createElement("button")
                let span = document.createElement("span")
                span.classList.add("customize-form-field-delete")
                cell.getElement().classList.add("tabulator-input-editable-btn");
                btn.setAttribute("type", "button")
                btn.innerText = "移除"
                btn.addEventListener("click", e => {
                    e.stopPropagation()
                    if (table.getDataCount() > 1) {
                        row.delete()
                    } else {
                        alert("至少保留一筆")
                    }
                })
                span.appendChild(btn)
                return span
            }
        },
        {
            title: "要保號碼",
            field: "要保號碼",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "原保單號碼",
            field: "原保單號碼",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "被保險人",
            field: "被保險人",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "要保人",
            field: "要保人",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "保費",
            field: "保費",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
            hozAlign: "right",
        },
        {
            title: "經手人",
            field: "經手人",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        // {
        //     title: "險種",
        //     field: "險種",
        //     formatter: function(cell, formatterParams, onRendered) {
        //         cell.getElement().classList.add("table-select", "tabulator-select-editable");
        //         return "<div class='table-select-inner'>" + cell.getValue() + "</div>"
        //     },
        //     editor: "select",
        //     editorParams: {
        //         "車險": "車險",
        //         "火險": "火險",
        //         "水險": "水險",
        //     }
        // },

    ],
    tabEndNewRow: true,
    tabEndNewRow: function(row) {
        let rowData = row.getData();
        return { ...rowData };
    }
});
//////////////////////////////////////////////////////////////////////
let table03Data = [{
        id: "a1",
        票號: "票號",
        金額: "金額",
        開票人: "開票人",
        關係: "關係",
        到期日: "到期日",
        帳號: "帳號",
        付款行: "付款行",
        收費來源: "收費來源",
    },
    {
        id: "a2",
        票號: "票號",
        金額: "金額",
        開票人: "開票人",
        關係: "關係",
        到期日: "到期日",
        帳號: "帳號",
        付款行: "付款行",
        收費來源: "收費來源",
    },
];
let table03 = new Tabulator("#table03", {
    data: table03Data,
    height: "100%",
    layout: "fitColumns",
    tooltips: true,
    tooltipsHeader: true,
    tooltipGenerationMode: "hover",
    headerSort: false,
    movableColumns: false,
    resizableRows: false,
    columns: [{
            title: "",
            field: "del",
            minWidth: 50,
            width: 50,
            formatter: (cell) => {
                let row = cell.getRow()
                let table = cell.getTable()
                let btn = document.createElement("button")
                let span = document.createElement("span")
                span.classList.add("customize-form-field-delete")
                cell.getElement().classList.add("tabulator-input-editable-btn");
                btn.setAttribute("type", "button")
                btn.innerText = "移除"
                btn.addEventListener("click", e => {
                    e.stopPropagation()
                    if (table.getDataCount() > 1) {
                        row.delete()
                    } else {
                        alert("至少保留一筆")
                    }
                })
                span.appendChild(btn)
                return span
            }
        },
        {
            title: "票號",
            field: "票號",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "金額",
            field: "金額",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
            hozAlign: "right",
        },
        {
            title: "開票人",
            field: "開票人",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "關係",
            field: "關係",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "到期日",
            field: "到期日",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "帳號",
            field: "帳號",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "付款行",
            field: "付款行",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },
        {
            title: "收費來源",
            field: "收費來源",
            formatter: function(cell, formatterParams, onRendered) {
                cell.getElement().classList.add("table-input", "tabulator-input-editable");
                return "<div class='table-input-inner'>" + cell.getValue() + "</div>"
            },
            editor: "input",
            editable: true,
        },

    ],
    tabEndNewRow: true,
    tabEndNewRow: function(row) {
        let rowData = row.getData();
        return { ...rowData };
    }
});
</script>

</html>